---
title: Using Data Science to Explore Insights and Contribute to the Short-Term Residential
  Accommodation (STRA) Regulatory Framework
author: "PW"
date: "12/18/2019"
output:
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Introduction

We would like to express our sincere thanks and gratitude to the Technical Working Group (TWG) Committee of the Short-Term Residential Accommodation (STRA) for presenting us with this opportunity to contribute to the draft STRA Guideline Regulatory framework.

Here, we would like to take this opportunity to contribute to the TWG Committee by applying Data Science methodologies to try extract valuable insights with the hope to aide the TWG Committee in refining its development and implementation processes with regards to the STRA Regulatory Framework.

Short-Term Accommodation (STA) has been garnering a lot of attention in Malaysia lately and pertinently, there are various opinions from many sides on how STA should be regulated. 

From our short study, we would like to recommend to the TWG Committee to consider adding another requirement to the STA Regulatory Framework on the importance of data sharing and collection by these online platforms to the Government of Malaysia for the purpose of enforcement and compliance once this STRA Regulation is implemented.

In our effort, we will be using a data set that consists of 14,912 Airbnb listings from the Klang Valley region only. Since Airbnb has stated that there are 53,000 listings [1] in Malaysia, our data set represents approximately 28% of the total amount of the listings in Malaysia. Therefore, it is considered a representative sample here. We would like to thank and credit The Data Knight Team for contributing this data set to us.


## Summary Findings on Airbnb's Klang Valley Region Data Set

### 3,100 hosts owns 14,912 of the Klang Valley listings on Airbnb  

From the total of 14,912 Airbnb listings from the Klang Valley region, we found out that the listings actually belongs to 3,100 unique Hosts registered on the Airbnb platform.
```{r load packages and dataset, echo= FALSE, include=FALSE}

library(data.table)
library(tibble)
library(dplyr)
library(ggplot2)
library(knitr)
library(stringr)
library(DT)
library(leaflet)
library(tidyverse)
library(lubridate)
library(knitr)

airbnb <- read.csv("~/Downloads/STRA/airbnbKL.csv", stringsAsFactors = FALSE)
```

```{r rename variables, echo=FALSE}
# Rename variables
airbnb <- airbnb %>% rename(
    id = X,
    accuracy = accuracy,
    amenities_types = amenities_names,
    amt_w_service = amt_w_service,
    average_rating = avg_rating,
    bathrooms = bathrooms,
    bedrooms = bedrooms,
    can_instant_book = can_instant_book,
    check_in = checkin,
    cleanliness_rating = cleanliness,
    communication_rating = communication,
    currency = currency,
    guest_satisfication_rating = guest_satisfication,
    host_id = host_id,
    host_languages = host_languages,
    host_reviews = host_reviews,
    is_business_travel_ready = is_business_travel_ready,
    is_new_listing = is_new_listing,
    is_superhost = is_superhost,
    latitude = lat,
    listing_description = listing_name,
    longitude = lng,
    localized_city = localized_city,
    localized_neighborhood = localized_neighborhood,
    location_rating = location,
    monthly_price_factor = monthly_price_factor,
    number_of_beds = num_beds,
    person_capacity = person_capacity,
    total_pictures = picture_count,
    price = price,
    rate_type_availability = rate_type,
    total_reviews = reviews_count,
    room_type_category = room_type_category,
    star_rating = star_rating,
    id_url = url,
    value_rating = value,
    weekly_price_factor = weekly_price_factor,
    neighborhood_id = neighborhood_id,
    neighborhood_location = neighborhood)
```

```{r distinct host_id, echo= FALSE}
distinct_host_id <- airbnb %>% 
    distinct(host_id) %>% 
    nrow()
data.frame(distinct_host_id)
# There are only 3,100 unique host_id
```

Here, the table above shows that from the total of 14,912 listings, there are 3,100 distinct Hosts with their unique Airbnb registration IDs. This translates to on average, the total amount of the Airbnb listings belongs to 3,100 Hosts with each Host owns approximately five (5) listings each.


```{r price, echo=FALSE}
summary(airbnb$price)
# Least expensive = RM25, Most expensive = RM44,993, Median= RM130
```

Although the pricing of the listings fluctuates and depends on the time period the data is captured, this data set shows that the least expensive Airbnb listing is priced at RM25, with the average or mean price at RM195.80. The most expensive listing is priced at RM44,993. However, this looks like a pricing error made by the particular Host and we will choose to disregard this listing.


```{r total_reviews, echo=FALSE}
summary(airbnb$total_reviews)
# Minimum = 0, Median = 13, Mean = 38.45, Max 484
```

Regarding reviews from Guests, this data set shows that the listing with the highest number of reviews is 484 reviews from the listing's Guests. The mean or average is 38 reviews per listing.


```{r filtered dataset, echo=FALSE}
# Filter dataset to needed variables
filtered_airbnb <- airbnb %>%
    group_by(id, host_id, price, total_reviews, latitude, longitude, 
             localized_neighborhood, id_url, neighborhood_location) %>%
    count()
```

```{r refactor variable, echo=FALSE, include= FALSE}
# Refactor variables
#airbnb$host_id <- as.character(airbnb$host_id)
#class(airbnb$host_id)
```

### Which Host has the Highest Total Amount of Listings?
#### List of Top 10 Hosts with the Highest Total Amount of Listings
```{r top_host, echo=FALSE}
top_host <- airbnb %>%
    group_by(host_id) %>%
    summarise(total_properties = n()) %>%
    arrange(desc(total_properties))
datatable(top_host, colnames= c("Host ID", "Total Airbnb Listings"))
```

From the above, we can see that the Host (Host ID = 5913470) has the highest total amount of listings with 650 listings in the Klang Valley region

i) The Host (Host ID = 43246408) with the second highest amount of listings has 227 listings.

ii) Meanwhile, the Host (Host ID = 180844928) at tenth (10) place has a total amount of 62 listings.

As we explore further below, we will review some of the most expensive and least expensive listings. We will also get to see how their listing looks like on Airbnb's website.


### Map of All Airbnb Listings in the Klang Valley Region
```{r leaflet, echo=FALSE}
leaflet(airbnb) %>%
    addTiles() %>%
    addProviderTiles("CartoDB.Positron") %>%
    addMarkers(~longitude, ~latitude, popup = ~host_id, label= ~host_id,
               clusterOptions = markerClusterOptions())
```

From the map above, we can see how the 14,912 Airbnb listings are distributed around the Klang Valley region.
The map distribution also shows that a large proportion of the listings are located within the central Kuala Lumpur areas.

### Selected Listing Profiles by Top Airbnb Hosts
The listing profiles below shows the total amount of listings by the top Hosts at the time the data set was captured. 

Hence, we should note that there could be discrepancy in comparison to its current total amount of listings that the Hosts possess now.

First, we will view the Host with the Highest Total Number of Listings

1. This Host [2] has a total of 650 listings on Airbnb's platform.

2. The majority of the Host's listings [3] are located in the Bukit Bintang area.

```{r highest listing}

knitr::include_graphics(normalizePath("~/Downloads/STRA/images/1highest.png"))
```



Below is the Host with the Second Highest Total Number of Listings

1. Here, the second highest Host has a total of 227 listings [4]

2. The majority of the Host's listings are situated in the KLCC area.

```{r second highest}

knitr::include_graphics(normalizePath("~/Downloads/STRA/images/2highest.png"))

```



Below is the Host with the the Third Highest Total Number of Listings

This Host has a total of 130 listings [5]

```{r third highest}

knitr::include_graphics(normalizePath("~/Downloads/STRA/images/3highest.png"))

```



This listing is one of the most expensive listing with a price of RM1,788 per night.

It is a whole villa located near KLCC area [6]

```{r most expensive}

knitr::include_graphics(normalizePath("~/Downloads/STRA/images/1788.png"))

```



Below is another one of the Most Expensive Listing (Price = RM777 per night).

This listing is another whole villa located at Taman Desa Petaling [7]

```{r second expensive}

knitr::include_graphics(normalizePath("~/Downloads/STRA/images/777.png"))

```



For the cheapest listing, the price is at RM25 per night (but the price changes depending on the day).

1. We need to be cautious here as the price is adjusted constantly but when the data was captured, this is the cheapest listing found in the data set.

2. From the listing's profile, the property is located in the KLCC area [8]

3. From the pictures of the listing, the Host had built capsules to maximize the Host's listing area.

```{r cheapest capsule}

knitr::include_graphics(normalizePath("~/Downloads/STRA/images/capsule.png"))

```



This listing is a Hostel located in Bangsar, near KL Sentral area [9]


```{r hostel}

knitr::include_graphics(normalizePath("~/Downloads/STRA/images/hostel.png"))

```



This is another listing with capsule beds hosted in one of the Summer Suites apartment in KLCC area.

Note the Host's ID [10] is different from the one above.


```{r cheapest capsule 2}

knitr::include_graphics(normalizePath("~/Downloads/STRA/images/capsule2.png"))

```

One main takeaway we would like to highlight here is that by applying Data Science techniques, we are able to explore the Airbnb listings more thoroughly and the insights here will be very helpful especially during the enforcement process by the respective Government Ministries and Local Councils after the STRA Regulation is implemented. 

With a total of 53,000 Airbnb listings, it will require a significant and targeted effort by the Government Ministries and Local Councils to regularly conduct regulation checks and ensure that the Hosts are compliant with the implemented STRA Regulation.


### Some Thoughts to Ponder for the TWG Committee

From the exploration of the data set above, we have managed to find some insights but at the same time, it also poses us extra questions. Hence, we would like to pose this to the TWG Committee:

1) Is the Capsule style listing allowed and does it abide to existing regulations especially on safety?

2) For the Hostel listing, what are the regulations that needs to be fulfilled here in order to operate?

3) What is the enforcement and compliance strategy after the STRA Regulatory Framework is implemented?


### Summary

In view of the impending enforcement of the STRA Regulation by the Government of Malaysia, again we would like to stress the importance of data collection of the listings' availability especially from the online platforms to support the enforcement process once the STRA Regulation is implemented. 

The significance of compliance helps to ensure and create parity in the marketplace while offering both our local and international consumers a sense of security and stability.

The rationale for this recommendation is elaborated further below:

1) To assist the Malaysian Government and Local Councils better during enforcement checkings and regulatory compliance with an aim to optimize the resources and manpower of respective Government Ministries, Enforcement Agencies and Local Councils.

2) The city of **San Francisco** [11] has an agreement with Airbnb and HomeAway to provide a monthly list of all short-term rentals so the city can verify the hosts' registration numbers, and the Companies will remove any listings and cancel futures stays at unregistered rentals. The Companies also agreed to install a pass-through system to send hosts' registration applications straight to the city.

3) At the same time, Airbnb and the city of **Barcelona** [12] initiated an agreement giving Barcelona officials access to its listings data.

4) For **China** [13], Airbnb’s compliance with Chinese regulations requiring foreigners to register their accommodation with local police within 24 hours brings it in line with hotels and guest houses.

### Moving Forward

Despite some limitations we encountered from the data set, we are still grateful to be able to give our best effort and contribute as much as we can to the TWG Committee here.

Suffice to say, we are keen and would like to take this study further with the hope of a larger data set that covers the whole of Malaysia with the aim to extract more insights to contribute to the TWG Committee and Working Group on Home Sharing Economy (WGHSE) on further refining the STRA Regulatory Framework in the coming future. 

At the same time, we also look forward to collaborate with other Government Ministries, Enforcement Agencies, Local Councils and Industry players on other aspects of the regulation as well. 

Thank you. 


### References

[1]:https://www.thestar.com.my/business/business-news/2019/07/02/airbnb-generates-rm3bil-in-direct-economic-impact-in-malaysia-last-year "Airbnb Malaysia has 53,000 listings to date"
https://www.thestar.com.my/business/business-news/2019/07/02/airbnb-generates-rm3bil-in-direct-economic-impact-in-malaysia-last-year "Airbnb Malaysia has 53,000 listings to date"

[2]: https://www.airbnb.com/rooms/26887008?source_impression_id=p3_1576648924_VEJtuFImH8aSfLQ2 "Host with the Highest Total Amount of Airbnb Listings"
https://www.airbnb.com/rooms/26887008?source_impression_id=p3_1576648924_VEJtuFImH8aSfLQ2 "Host with the Highest Total Amount of Airbnb Listings"

[3]: https://www.airbnb.com/rooms/31610625?source_impression_id=p3_1576648967_zAc9BNlbwlgMB0Gz "Host with the Highest Total Amount of Airbnb Listings"
https://www.airbnb.com/rooms/31610625?source_impression_id=p3_1576648967_zAc9BNlbwlgMB0Gz "Host with the Highest Total Amount of Airbnb Listings"

[4]: https://www.airbnb.com/rooms/12915001?source_impression_id=p3_1576604042_Uq%2FGLrTqu6hzIjh0 "Host with the Second Highest Total Amount of Airbnb Listings"
https://www.airbnb.com/rooms/12915001?source_impression_id=p3_1576604042_Uq%2FGLrTqu6hzIjh0 "Host with the Second Highest Total Amount of Airbnb Listings"

[5]:https://www.airbnb.com/rooms/22236500?source_impression_id=p3_1576604317_ALfRg%2BWXkrjRcJ9V "Host with the Third Highest Total Amount of Airbnb Listings"
https://www.airbnb.com/rooms/22236500?source_impression_id=p3_1576604317_ALfRg%2BWXkrjRcJ9V "Host with the Third Highest Total Amount of Airbnb Listings"

[6]:https://www.airbnb.com/rooms/plus/22116252?source_impression_id=p3_1576604412_jaSJQMi6xeKL6SdY "One of the Most Expensive Listing on Airbnb"
https://www.airbnb.com/rooms/plus/22116252?source_impression_id=p3_1576604412_jaSJQMi6xeKL6SdY "One of the Most Expensive Listing on Airbnb"

[7]: https://www.airbnb.com/rooms/17779823?source_impression_id=p3_1576604505_OUt0Yw9HeHydCEQ2 "One of the Most Expensive Listing on Airbnb"
https://www.airbnb.com/rooms/17779823?source_impression_id=p3_1576604505_OUt0Yw9HeHydCEQ2 "One of the Most Expensive Listing on Airbnb"

[8]: https://www.airbnb.com/rooms/26000146?source_impression_id=p3_1576604666_Qap%2FPeVSZQcVY%2BPw "Cheapest Capsule Style Airbnb Listing"
https://www.airbnb.com/rooms/26000146?source_impression_id=p3_1576604666_Qap%2FPeVSZQcVY%2BPw "Cheapest Capsule Style Airbnb Listing"

[9]: https://www.airbnb.com/rooms/22958855?source_impression_id=p3_1576604824_6tVPO4PLhW9hw%2B9V "Cheapest Hostel Airbnb Listing"
https://www.airbnb.com/rooms/22958855?source_impression_id=p3_1576604824_6tVPO4PLhW9hw%2B9V "Cheapest Hostel Airbnb Listing"

[10]: https://www.airbnb.com/rooms/37896694?source_impression_id=p3_1576662036_MxVTKme%2FI4P%2FQMv9 "Another Capsule Listing"
https://www.airbnb.com/rooms/37896694?source_impression_id=p3_1576662036_MxVTKme%2FI4P%2FQMv9 "Another Capsule Listing"

[11]: https://www.courthousenews.com/san-francisco-airbnb-settle-dispute-short-term-rental-law/
https://www.courthousenews.com/san-francisco-airbnb-settle-dispute-short-term-rental-law/

[12]: https://www.citylab.com/life/2018/06/barcelona-finds-a-way-to-control-its-airbnb-market/562187/
https://www.citylab.com/life/2018/06/barcelona-finds-a-way-to-control-its-airbnb-market/562187/

[13]: https://www.scmp.com/tech/article/2139526/airbnb-complies-china-law-hand-over-guest-details-listings-double
https://www.scmp.com/tech/article/2139526/airbnb-complies-china-law-hand-over-guest-details-listings-double

https://www.citylab.com/life/2019/07/vacation-rentals-europe-cities-airbnb-regulations-travel-eu/593146/

https://www.thedataknight.com/


